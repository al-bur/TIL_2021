# [210502] CS - 도메인, IP 주소

### 1.  IP 주소란?

인터넷에 연결되어 있는 장치(컴퓨터, 스마트폰, 태블릿, 서버등등)들은 각각의 장치를 식별할 수 있는 주소를 가지고 있는 데 이를 `ip 주소(internet protocal Address)`라고 한다. 인터넷에서만 사용되는 전화번호라고 생각할 수 있고, 이런 `ip주소`는 사람들이 외우기 어렵기 때문에, 전화번호부 같은 역할을 하는 서비스가 필요하다. `DNS`가 이런 역할을 한다. 여기서 `DNS`의 `D`는 `도메인`을 지칭한다. `DNS(Domain Name System)`은 인터넷의 도메인 체계를 뜻한다. 이는 도메인 이름을 `IP 주소`로 변환하는 역할을 한다.

<br>

### 2. 도메인이란?

---

도메인의 정의를 살펴보면, 위에서 말했듯이 `ip 주소`를 사람들이 일일이 기억해내기 힘들기 때문에, 각 `ip`에 이름을 부여한 것이 `도메인`이라고 보면 된다.

> ex) 220.95.233.172 -> naver.com
>
> ​	  114.108.157.19 -> daum.net



도메인은 딱 한 가지만 존재할 수 있다.

<br>

### 3. 도메인명과 IP주소를 구분하는 이유

---

**그렇다면, 애초에 네트워크에 연결되어 있는 장치들을 지정할 때 도메인명으로 하면 되지 않을까?**

여기서, 도메인과 IP주소가 별도로 사용되는 이유를 생각해볼 필요가 있다. 그것은 바로 `도메인`은 `도메인명`으로 수십 바이트에서 255바이트까지의 문자를 이름으로 취급하기 때문에 라우터가 부하되어 데이터를 운반하는 동작에 더 많은 시간이 걸리며 결정적으로 `네트워크의 속도가 느려지게 된다`

그래서, 적절하게 `IP주소`와 `도메인명`이 서로를 이용하여 서로를 알 수 있게 하는 것이 중요해졌고, 이를 위해 `DNS`가 사용이 되게 되었다!

<br>

### 4. 도메인명으로 IP 주소를 얻는 과정

---

![DNS 동작원리](https://user-images.githubusercontent.com/64825713/116816903-e62fb200-ab9e-11eb-8b08-958a67e9c16c.png)


> 1. 위의 그림과 같이 PC 브라우저에서 www.naver.com 을 입력한다. 그러면 PC는 미리 설정되어 있는 DNS (단말에 설정되어 있는 이 DNS를 Local DNS라 부름, 위에서는 203.248.252.2) 에게 "www.naver.com 이라는 hostname" 에 대한 IP 주소를 요청한다.
> 2. `Local DNS` 에는 "www.naver.com 의 IP 주소"가 있을 수도 없을 수도 있다. 만약 있다면 Local DNS 가 바로 PC에 IP 주소를 주고 끝난다. 하지만 본 설명에서는 **Local DNS에 "www.naver.com 의 IP 주소"가 없다고 가정** 한다.
> 3. Local DNS는 이제 "www.naver.com 의 IP 주소"를 찾아내기 위해 **다른 DNS 서버들과 통신(DNS 메시지)을 시작**한다. 먼저 `Root DNS` 서버에게 "www.naver.com 의 IP 주소"를 요청하며, 이를 위해 각 Local DNS 서버에는 Root DNS 서버의 정보 (IP 주소)가 미리 설정되어 있어야 한다. `Root DNS 서버` 는 전세계에 13대가 구축되어 있다. 미국에 10대, 일본/네덜란드/노르웨이에 각 1대씩이며, 우리나라의 경우 Root DNS 서버가 존재하지는 않지만 Root DNS 서버에 대한 미러 서버를 3대 운용하고 있다고 한다.
> 4. **Root DNS 서버** 는 "www.naver.com 의 IP 주소" 를 찾을 수 없어 **Local DNS 서버**에게 "www.naver.com 의 IP 주소 찾을 수 없음. 다른 DNS 서버에게 물어봐" 라고 응답을 한다.
> 5. 이 다른 DNS 서버는 `com 도메인` 을 관리하는 DNS 서버이다.
> 6. 이제 **Local DNS 서버**는 **com 도메인을 관리하는 DNS 서버**에 다시 www.naver.com에 대한 IP 주소를 요청한다.
> 7. **com 도메인을 관리하는 DNS 서버**에도 해당 정보가 없으면, Local DNS 서버에게 "www.naver.com 의 IP 주소 찾을 수 없음. 다른 DNS 서버에게 물어봐" 라고 응답을 합니다. 이 다른 DNS 서버는 `naver.com 도메인을 관리하는 DNS 서버` 이다.
> 8. 이제 **Local DNS 서버**는 **naver.com DNS 서버**에게 다시 "www.naver.com 의 IP 주소" 를 요청한다.
> 9. **naver.com DNS 서버** 에는 "www.naver.com 의 IP 주소" 가 있다. 그래서 **Local DNS 서버**에게 "www.naver.com에 대한 IP 주소는 222.122.195.6" 라는 응답을 한다.
> 10. 이를 수신한 **Local DNS**는 www.naver.com 의 IP 주소를 캐싱을 하고 이후 다른 요청이 있을시 응답할 수 있도록 IP 주소 정보를 단말(PC)에 전달해 줍니다.

위의 글은 [Doomchit_3님의 글을 가지고 왔다](https://velog.io/@doomchit_3/Internet-DNS-%EC%9E%91%EB%8F%99%EC%9B%90%EB%A6%AC-IMBETPY)

