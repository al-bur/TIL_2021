# [210627] CS - DOM과 가상 DOM

웹 개발 공부를 하다보면 `DOM`이라는 용어를 자주 접할 수 있다. 빠르게 DOM의 정의를 살펴보자

<br>

### 1. DOM이란?

---

`Document Object Model`의 약자이고 HTML 및 XML 문서를 위한 API이다. 쉽게 설명하자면, 웹페이지를 객체로 표현하는 모델이라고 보면된다. 이렇게 말하면 아직 `DOM`이 무슨 역할을 하는 지 알기 힘들 것이다. 이를 위해 먼저,  브라우저에서 웹페이지가 렌더링 되는 과정을 살펴봐야한다.

<br>

**웹페이지 렌더링 과정**

1. 브라우저는 HTML 태그를 파싱하여 `DOM Tree`를 구성한다.
2. 브라우저는 css를 파싱하여 `CSSSOM Tree`를 구성한다.
3. `Dom Tree`와 `CSSSOM Tree`을 합쳐서 `렌더 트리`를 만들어낸다.
4. 브라우저는 렌더링을 실행한다.

<br>

위 과정을 살펴보면, 웹페이지가 렌더링 되는 과정 속의 `렌더 트리`를 구성하는 과정에서 `DOM`이 활용되는 것을 볼 수 있다.  추후, 브라우저에 어떤 조작을 가하고 싶을 때, `DOM`을 통해서 조작을 가할 수 있다.

<br>

### 1-2 DOM의 단점

---

하지만, `DOM`을 사용한 렌더링 방식에는 현대의 `빠른 속도의 웹` 방식에 맞지 않는 큰 단점이 존재한다.

브라우저 화면에서 어떤 변화가 일어나게 된다. 이는 `DOM`을 조작해서 화면에 대한 변화를 일으키게 되고, 변화가 일어난 `DOM`이 `DOM Tree`에 변화를 일으키게 되고, 이를 다시 렌더링에서 사용자에게 바뀐 화면을 보여주게 된다. 

예를 들어, `DOM`에 5개의 `li` 태그를 추가해준다면 총 5번의 `DOM Tree` 갱신이 일어나게 되고, 5번의 새로운 `Render Tree`가 생성되어야 한다. 소수의 변화만 일어난다면 상관없겠지만 `현대의 웹사이트`들에서는 수만번의 변화가 일어나 기존의 `DOM`을 변경하는 방법을 사용하면 `UX`가 좋지않은 사이트라고 소문이 날 것이다.

<br>

이러한 단점을 `가상 DOM`이 해결해줄 수 있다.



<br>

### 2. 가상 DOM이란?

---

**그렇다면, 가상 `DOM`은 일반적인 `DOM`과는 무슨 차이가 있을까?**

쉽게 말하면, `DOM`을 복사해서 `가상 DOM`을 생성하여 메모리 위에 올려두고,  `DOM`에 변경이 있을 때만 해당 변경을 반영한다.

<br>

잘 정리된 블로그에서 가져온 인용글이다. 

> React에서 데이터가 변하여 브라우저 상의 실제 DOM에 업데이트하는 과정은 3가지 절차를 밟는다.
>
> 1. 데이터가 업데이트되면, 전체 UI를 Virtual DOM에 리렌더링한다.
>
> 2. 이전 Virtual DOM에 있던 내용과 현재의 내용을 비교한다.
>
> 3. 바뀐 부분만 실제 DOM에 적용이 된다. (컴포넌트가 업데이트 될 때, 레이아웃 계산이 한번만 이뤄진다.)
>
> **[출처]** http://hong.adfeel.info/frontend/react/react-%EB%A9%94%EB%AA%A8/

<br>

`가상 DOM`을 이용하면 한 곳에서 일어난 모든 변화를 `가상 DOM`에 적용하여 기존에는 여러번 `DOM`에 대한 수정이 일어나야 했던 것을 한 번의 수정 (한 번의 렌더링)으로 해결할 수 있게 되면서, 시간과 작업량을 줄일 수 있다. 

<br>

### 참고 자료

---

https://brunch.co.kr/@cadenzah/3

